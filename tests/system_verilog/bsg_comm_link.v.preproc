
module bsg_comm_link #
  (parameter channel_width_p = "inv"
  ,parameter core_channels_p = "inv"
  ,parameter link_channels_p = "inv"

        ,parameter sbox_pipeline_in_p  = 1bb
  ,parameter sbox_pipeline_out_p = 1bb

              ,parameter channel_mask_p = (1 << (link_channels_p)) - 1

    ,parameter master_p = "inv"

    ,parameter master_bypass_test_p = 5bb

                  ,parameter master_to_slave_speedup_p = 100

        ,parameter lg_credit_to_token_decimation_p = 3

      ,parameter lg_input_fifo_depth_p = 5

    ,parameter width_p=core_channels_p*channel_width_p
  
    ,parameter channel_select_p = (1<<(link_channels_p))-1 )

  (input core_clk_i
  ,input io_master_clk_i
  ,input async_reset_i

    ,output core_calib_done_r_o

    ,input               core_valid_i
  ,input [width_p-1:0] core_data_i
  ,output              core_ready_o

    ,output               core_valid_o
  ,output [width_p-1:0] core_data_o
  ,input                core_yumi_i

    ,input  [link_channels_p-1:0] io_clk_tline_i
  ,input  [link_channels_p-1:0] io_valid_tline_i
  ,input  [channel_width_p-1:0] io_data_tline_i [